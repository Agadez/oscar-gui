<div class="input-group" style="margin-top: 10px">
  <div class="search-form d-flex">
    <form class="search-input-form w-100" [hidden]="!oscarQuery">
      <input name="normal_input" [matAutocomplete]="normal_auto" [(ngModel)]="inputString"
             (ngModelChange)="inputUpdate($event)" (keydown.enter)="search()" type="text" class="search-input"
             placeholder="Search">
      <mat-autocomplete #normal_auto="matAutocomplete" (optionSelected)="normalSelectEvent($event)">
        <mat-option *ngFor="let option of normalSuggestions"
                    [value]="inputWithoutLastWord(inputString) + '@' + option.k + ':' + option.v">@{{option.k}}:{{option.v}}</mat-option>
      </mat-autocomplete>
    </form>
    <form class="search-input-form" [hidden]="oscarQuery">
      <input name="natural-input" class="search-input" placeholder="Natural Language Search"
             (ngModelChange)="naturalUpdate($event)" (keydown.enter)="search()" [formControl]="myControl"
             [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectEvent($event)">
        <mat-option *ngFor="let option of suggestions"
                    [value]="option.prefix + option.suggestion">{{option.suggestion}}</mat-option>
      </mat-autocomplete>
    </form>
    <div class="button-area" style="width: 30%">
      <div class="d-flex w-100 justify-content-around align-items-center px-2" style="gap: 10px">
        <i (click)="reload()" class="fas fa-times side-button"></i>
      </div>
      <span class="vertical-line"></span>
      <!--<i [hidden]="oscarQuery" (click)="oscarQuery = !oscarQuery" class="fas fa-language side-button-active"
         title="Use Oscar Query Language"></i>
      <i [hidden]="!oscarQuery" (click)="oscarQuery = !oscarQuery" class="fas fa-language side-button"
         title="Use Natural Query Language"></i>-->
      <div class="d-flex w-100 justify-content-around align-items-center px-2" style="gap: 10px">
        <i (click)="toggleRouting()" class="fas fa-route {{sideButtonClass}}"></i>
        <i (click)="togglePreferences()" class="fas fa-cog" [ngClass]="{'side-button': !preferences, 'side-button-active': preferences}" ></i>
        <svg (click)="toggleImpressum()" [ngClass]="{'side-button': !impressumVisible, 'side-button-active': impressumVisible}" width="1rem" height="1rem" viewBox="0 0 38.302 80.501" xmlns="http://www.w3.org/2000/svg"><g id="svgGroup" stroke-linecap="round" fill-rule="evenodd" font-size="9pt" stroke="currentColor" stroke-width="0.25mm" fill="currentColor" style="stroke:currentColor;stroke-width:0.25mm;fill:currentColor"><path d="M 0 75.8 L 3.6 69 A 23.014 23.014 0 0 0 17.035 73.298 A 28.071 28.071 0 0 0 17.4 73.3 Q 20.692 73.3 23.047 72.654 A 10.776 10.776 0 0 0 25.35 71.75 A 6.676 6.676 0 0 0 26.791 70.72 A 4.419 4.419 0 0 0 28.2 67.4 Q 28.2 66.2 27.65 65 Q 27.1 63.8 25.75 62.55 A 14.196 14.196 0 0 0 24.597 61.598 Q 23.99 61.146 23.26 60.681 A 30.985 30.985 0 0 0 22.05 59.95 A 46.034 46.034 0 0 0 20.112 58.902 Q 19.231 58.451 18.228 57.976 A 95.472 95.472 0 0 0 16.1 57 A 89.741 89.741 0 0 1 13.126 55.664 Q 11.668 54.976 10.401 54.302 A 48.392 48.392 0 0 1 8.95 53.5 A 27.192 27.192 0 0 1 6.579 51.974 Q 5.451 51.157 4.552 50.299 A 15.742 15.742 0 0 1 4.15 49.9 A 13.606 13.606 0 0 1 2.426 47.747 A 11.067 11.067 0 0 1 1.45 45.85 Q 0.6 43.7 0.6 41 Q 0.6 35.9 4.05 32.15 A 20.355 20.355 0 0 1 8.975 28.279 A 27.684 27.684 0 0 1 13.3 26.3 A 39.123 39.123 0 0 1 9.921 24.575 Q 6.893 22.826 5.1 20.9 A 9.984 9.984 0 0 1 2.459 14.873 A 13.329 13.329 0 0 1 2.4 13.6 Q 2.4 10.7 3.75 8.2 A 12.82 12.82 0 0 1 7.174 4.186 A 14.94 14.94 0 0 1 7.55 3.9 A 17.162 17.162 0 0 1 10.638 2.112 A 22.79 22.79 0 0 1 13.5 1.05 A 24.533 24.533 0 0 1 17.938 0.173 A 31.512 31.512 0 0 1 21.3 0 Q 25.6 0 29.8 1.25 A 36.666 36.666 0 0 1 34.095 2.812 A 28.668 28.668 0 0 1 37.2 4.4 L 33.4 10.6 Q 31.2 9.2 27.9 7.95 Q 24.6 6.7 21.1 6.7 A 23.234 23.234 0 0 0 18.288 6.858 Q 15.252 7.23 13.458 8.473 A 6.486 6.486 0 0 0 13.15 8.7 A 9.509 9.509 0 0 0 11.925 9.833 Q 11.324 10.504 10.996 11.197 A 3.939 3.939 0 0 0 10.6 12.9 Q 10.6 14.3 11.1 15.4 Q 11.6 16.5 13.1 17.7 A 17.101 17.101 0 0 0 14.267 18.549 Q 14.889 18.965 15.635 19.403 A 41.296 41.296 0 0 0 17.25 20.3 A 56.397 56.397 0 0 0 19.267 21.31 Q 21.378 22.319 24.2 23.5 Q 31.344 26.548 34.677 29.959 A 14.708 14.708 0 0 1 35 30.3 Q 38.3 33.9 38.3 38.9 A 13.833 13.833 0 0 1 37.539 43.566 A 12.132 12.132 0 0 1 34.95 47.8 Q 31.917 51.06 26.792 53.336 A 37.527 37.527 0 0 1 25.7 53.8 Q 29.545 55.486 32.002 57.446 A 14.911 14.911 0 0 1 34.05 59.4 Q 36.7 62.5 36.7 66.7 A 12.547 12.547 0 0 1 36.206 70.271 A 10.974 10.974 0 0 1 35.3 72.45 A 12.468 12.468 0 0 1 32.008 76.279 A 14.843 14.843 0 0 1 31.3 76.8 A 17.779 17.779 0 0 1 27.76 78.678 A 22.954 22.954 0 0 1 25.1 79.55 A 28.508 28.508 0 0 1 20.327 80.366 A 35.576 35.576 0 0 1 17.2 80.5 A 36.719 36.719 0 0 1 9.163 79.664 A 26.765 26.765 0 0 1 0 75.8 Z M 19.5 50.6 A 22.685 22.685 0 0 0 23.45 49.002 A 17.012 17.012 0 0 0 27.05 46.5 A 8.681 8.681 0 0 0 29.992 40.203 A 10.588 10.588 0 0 0 30 39.8 A 8.642 8.642 0 0 0 27.771 33.981 A 10.949 10.949 0 0 0 27.7 33.9 A 11.231 11.231 0 0 0 25.741 32.183 Q 23.676 30.73 20.432 29.498 A 39.893 39.893 0 0 0 19.9 29.3 A 24.498 24.498 0 0 0 15.836 30.867 A 18.052 18.052 0 0 0 12 33.4 A 9.115 9.115 0 0 0 9.749 36.269 A 8.606 8.606 0 0 0 8.9 40.1 Q 8.9 43.4 11.45 46 A 13.533 13.533 0 0 0 13.664 47.791 Q 15.958 49.307 19.445 50.58 A 43.63 43.63 0 0 0 19.5 50.6 Z" vector-effect="non-scaling-stroke"/></g></svg>
      </div>
    </div>
  </div>
</div>
<mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
<div *ngIf="preferences" class="bg-white mt-2 rounded px-3 py-2 d-flex justify-content-between">
  <span>Local Search</span>
  <mat-slide-toggle color="primary" [(ngModel)]="localSearch"></mat-slide-toggle>
</div>
<div [hidden]="!error" class="alert alert-danger" role="alert">
  Result to large. Please refine query.
</div>
<div [hidden]="!noResult" class="alert alert-info" role="alert">
  No hits, try again!
</div>

<!--<mat-slider thumbLabel (valueChange)="radiusChange($event)" style="width: 400px" min="0.1" max="1000" step="0.5" value="1000"></mat-slider>-->
<!--<input type="checkbox" [checked]="this.refinementStore.hasKeyRefinement({id: 0, key: 'highway'})" (change)="streetsChanged()"> streets-->
<app-active-refinements></app-active-refinements>


